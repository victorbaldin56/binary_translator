# Бинарный транслятор
Продолжение одного из моих предыдущих проектов,
в ходе которого была создана примитивная виртуальная машина со стековой архитектурой (далее -- SPU):
https://github.com/victorbaldin56/processor.
Транслирует байт-код, предназначенный для выполнения на SPU, в код для
реальных аппаратных архитектур.

## Использование
На данный момент поддерживается единственная целевая архитектура: x86-64, однако
в будущем этот список можно расширять за счет использования внутреннего промежуточного
представления (IR).

Поддерживается 2 основных режима работы:
1. Трансляция в язык ассемблера x86 диалекта [NASM](https://www.nasm.us/).
Включается опцией `-S`.
На выходе получается файл, ассемблируемый при помощи `nasm`.
Для линковки нужно вызвать линкер при помощи драйвера `clang` или `gcc`,
поскольку для поддержки ввода и вывода необходимы функции из
стандартной библиотеки C.
Пример линковки:
```sh
clang [output.o] -o [output]
```
2. JIT-трансляция -- транслятор генерирует нативный код для целевой архитектуры,
размещая его в буфере в динамической памяти, а затем выполняет. Данный режим
используется по умолчанию, если не указана опция `-S`.

## Сборка и установка
Для успешной сборки и запуска требуется операционная система на базе ядра
Linux и архитектура x86-64. При других конфигурациях не проверялось,
поэтому гарантий нет.

Чтобы собрать проект из исходного кода, необходимо:
1. Клонировать этот репозиторий.
2. Создать директорию для сборки и сконфигурировать проект.
```sh
mkdir build && cd build/
cmake .. -DCMAKE_BUILD_TYPE=Release
```
3. Собрать проект.
